<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>bnmonitor: Checking the Robustness and Sensitivity of Bayesian Networks</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr.¬†Rachel Wilkerson   Founder at Tesserwell, LLC   ¬† Github: rachwhatsit    ¬† @rlwilkerson   ¬† rachel.lynne.wilkerson@gmail.com" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <code>bnmonitor</code>: Checking the Robustness and Sensitivity of Bayesian Networks
### Dr.¬†Rachel Wilkerson <br> Founder at <a href="https://www.tesserwell.co/">Tesserwell, LLC</a> <br> <a href="https://github.com/rachwhatsit"><i class="fa fa-github" style="font-size:48px;color:white"></i>¬† Github: rachwhatsit</a><br> <a href="https://twitter.com/rlwilkerson?lang=en"> <i class="fa fa-twitter fa-fw"></i> ¬† <span class="citation">@rlwilkerson</span></a><br> <a href="mailto:rachelw52@gmail.com"> <i class="fa fa-paper-plane fa-fw"></i>¬† rachel.lynne.wilkerson@gmail.com</a><br>
### 2021-07-09 ‚ÄÇ <img src="user-logo-color.png" alt="drawing" width="100"/> <br><br> Package webpage at <br> <a href="https://cran.r-project.org/web/packages/bnmonitor/index.html" class="uri">https://cran.r-project.org/web/packages/bnmonitor/index.html</a>

---





 
# Package Overview üì¶


### Robustness 

- `bnmonitor` provides a suite of diagnostic monitors that can be used in increasing fineness to check the **accuracy of forecasts** flowing from a model 

- Robustness monitors work on BNs learned from data

--

### Sensitivity 

- The sensitivity functions check the **effect of changes to the probability distributions**

- Sensitivity monitors work on BNs learned either from data or elicitation. Data can be either discrete or continous.

???


---

# Example: Diabetes üíâ

We illustrate our package with what the UCI Repository refers to as the Pima Indian dataset. 
It consists of 392 observation with the following variables, discretized according to &lt;a name=cite-Nojavan2017&gt;&lt;/a&gt;[Nojavan, Qian, and Stow (2017)](#bib-Nojavan2017) :

--
 
- `PREG`: number of times pregnant (low/high)

--

- `GLUC`: plasma glucose concentration (low/high)

--

- `PRES`: diastolic blood pressure (low/high)

--

- `TRIC`: triceps skin fold thickness (low/high)

--

- `INS`: 2-hour serum insulin (low/high)

--

- `MASS`: body mass index (low/high)

--

- `PED`: diabetes pedigree function (low/high)

--

- `AGE`: age (low/high)

--

- `DIAB`: test for diabetes (neg/pos)

---

background-image: url("libs/img/women-Pima-shinny-game-field-hockey.jpeg")
background-position: contain
class: center, bottom, inverse

We chose this dataset as it best showcases our monitors. However, we acknowledge that we are using the data without the explicit consent of or compensation for the original Akimel O‚Äôodham participants. For more information see &lt;a name=cite-radin2017digital&gt;&lt;/a&gt;[Radin (2017)](#bib-radin2017digital).

???

Image credit: [image of Akimel O‚Äôodham women playing lacrosse](https://www.britannica.com/topic/Pima-people)

---
class: inverse, center, middle

# Robustness 


---
# Bayesian Network 

.pull-left[

```r
dag  &lt;- hc(diabetes)
graphviz.plot(dag)
```

&lt;img src="useR-bnmonitor_files/figure-html/daghc-1.png" title="DAG generated by hill climbing algorithm, showing a collider at diabetes and age nodes." alt="DAG generated by hill climbing algorithm, showing a collider at diabetes and age nodes." width="75%" height="75%" /&gt;
]

.pull-right[

```r
dag2  &lt;- mmhc(diabetes)
graphviz.plot(dag2)
```

&lt;img src="useR-bnmonitor_files/figure-html/dagmmhc-1.png" title="Alternative DAG only showing a collider for diabetes. TRIC, MASS form their own component, and PED is a singleton edge." alt="Alternative DAG only showing a collider for diabetes. TRIC, MASS form their own component, and PED is a singleton edge." width="90%" height="75%" /&gt;
]

???

here are two candidates dags we learn from hill climbing and max min hill climbing.
can compute the BF in bnlearn package, ours shows the contributions
---
# Global monitors üåç


```r
glb.mon &lt;- global_monitor(dag = dag , df = diabetes,alpha=2)
glb.mon2 &lt;- global_monitor(dag = dag2 , df = diabetes,alpha=2)
```

--

- `\(\alpha\)` is commonly set as the maximum number of levels for a node in the dataset

--

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Vertex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; dag_hc &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; dag_mmhc &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; bf_vertex &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PREG &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 236.266 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 236.266 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GLUC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 274.348 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 274.348 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PRES &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 250.087 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 250.087 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TRIC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 267.184 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 274.15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0.975 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; INS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 219.878 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 219.878 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MASS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 231.847 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 231.847 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PED &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 272.604 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 274.475 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0.993 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; AGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 246.505 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 250.768 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0.983 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; DIAB &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 214.011 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 214.405 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0.998 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



???

our nodes can be used in increasingly refined manner 
comparing node contributions allows us to see directly 
we can also return to the global monitor after making changes downstream

---
# Prequential Monitors 

- Prequential monitors were first developed by &lt;a name=cite-Dawid1992&gt;&lt;/a&gt;[Dawid (1992)](#bib-Dawid1992) and refined in &lt;a name=cite-Cowell2006&gt;&lt;/a&gt;&lt;a name=cite-Cowell2007&gt;&lt;/a&gt;[Cowell, Dawid, Lauritzen, and Spiegelhalter (2006)](#bib-Cowell2006); [Cowell, Verrall, and Yoon (2007)](#bib-Cowell2007).

--

- `\(p_i\)` gives the predictive density of the BN learned using the dataset `\(x_{[i-1]}\)` including only the first `\(i-1\)`-th observations

--

- the level of surprise üò≤ of observing the value `\(y_j\in\mathbb{Y}_j\)` for the `\(j\)`-th variable after having processed `\(i\)` observations is:  
`$$S_{ij} = -\log(p_i(y_j)))$$`

--

- We use the **logarithmic score** function here, but other score functions can certainly be substituted. 

---
### Diabetes Example üíâ 

<div id="htmlwidget-be5a03d9052dc02a4d09" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-be5a03d9052dc02a4d09">{"x":{"filter":"none","fillContainer":false,"data":[["4","5","7","9","14","15","17","19","20","21"],["low","low","high","high","low","high","low","low","low","high"],["low","high","low","high","high","high","low","low","low","high"],["low","low","low","high","low","high","high","low","high","high"],["low","high","high","high","low","low","high","high","high","high"],["low","high","low","high","high","high","high","low","low","high"],["low","high","low","low","low","low","high","high","high","high"],["low","high","low","low","low","high","high","low","high","high"],["low","high","low","high","high","high","high","high","high","high"],["neg","pos","pos","pos","pos","pos","pos","neg","pos","neg"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>PREG<\/th>\n      <th>GLUC<\/th>\n      <th>PRES<\/th>\n      <th>TRIC<\/th>\n      <th>INS<\/th>\n      <th>MASS<\/th>\n      <th>PED<\/th>\n      <th>AGE<\/th>\n      <th>DIAB<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}],"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>


---
# Standardization


- **Relative** standardization compares the log likelihood contributions to two different models. 

--

- **Absolute** standardization computes a Z-statistic using the following expectation and variance:

--

 `$$E_{ij} = \sum_{y_j\in\mathbb{Y}_j}p_i(y_j)\log(p_i(y_j))$$`

 `$$V_{ij}=\sum_{y_j\in\mathbb{Y}_j}p_i(y_j)\log(p_i(y_j))^2-E_{ij}^2$$`

--

 `$$Z_{ij}=\frac{\sum_{k=1}^iS_{kj}-\sum_{k=1}^iE_{kj}}{\sqrt{\sum_{k=1}^iV_{kj}}}$$`

- `\(| Z_{ij}|&gt; 1.96\)` in absolute value may be an indication of poor model fit

---
class: center, middle 

# Prequential = Sequential + predictions üîÆ




---

# Marginal node monitors  

- Marginal and conditional node monitors check the **appropriateness of the probability distributions** of each node

--


```r
marg.ped &lt;- plot(seq_marg_monitor(dag, diabetes, "PED"))
```

--

.pull-left[
&lt;img src="useR-bnmonitor_files/figure-html/nodegoodfitout-1.png" title="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. all points are within two dashed lines representing |z| &amp;lt;1.96" alt="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. all points are within two dashed lines representing |z| &amp;lt;1.96" width="95%" height="95%" /&gt;
]

--

.pull-right[
 üëå The marginal node monitor for PED (diabetes pedigree function) indicates a good fit.
]


---

# Marginal node monitors 


```r
marg.diab &lt;- plot(seq_marg_monitor(dag, diabetes, "DIAB"), fig.alt = "scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. most points are within two dashed lines representing |z| &lt;1.96 except towards the end of the indices.")
```

--


.pull-left[
&lt;img src="useR-bnmonitor_files/figure-html/nodebadfitout-1.png" title="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. most points are within two dashed lines representing |z| &amp;lt;1.96 except towards the end of the indices." alt="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. most points are within two dashed lines representing |z| &amp;lt;1.96 except towards the end of the indices." width="95%" height="95%" /&gt;
]

--

.pull-right[
 ‚ùå The marginal node monitor for `DIAB` (diabetes) suggests that the the marginal distribution may be inappropriate for later forecasts.
]

???

By contrast, the marginal sequential node monitor suggests that the probability distribution for the node  diabetes is not necessarily accurate for later observation in the data. 

---
# Conditional node monitors ü§∞üèΩ 

- Conditional node monitors pass evidence on the other variables for the `\((i-1)\)`th observations.

--



--

.pull-left[
&lt;img src="useR-bnmonitor_files/figure-html/condmonitorout-1.png" title="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. the first half of the dataset shows points well below the red dashed line representing z &amp;lt; 1.96" alt="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. the first half of the dataset shows points well below the red dashed line representing z &amp;lt; 1.96" width="504" /&gt;
]

.pull-right[
üßêThe conditional node monitor for PREG (pregnancy) indicates a poor fit to early forecasts in the data. 
]


---
# Parent child monitor üë™ 

- The parent-child monitors score `\(S_{ij}^{\pi_j}=p_i(y_j|y_{\pi_j})\)` with the same standardization as the node monitors. 

--


```r
pach.preg &lt;- plot(seq_pa_ch_monitor(dag, diabetes, "PREG",
                  pa.names = "AGE", pa.val = "low", alpha=2))
```


--

.pull-left[
&lt;img src="useR-bnmonitor_files/figure-html/pachmonitorout-1.png" title="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. the first half of the dataset shows points well above the red dashed line representing z &amp;lt; 1.96" alt="scatterplot with x axis depicting index in the dataset and y indicating the standardized z statistics. the first half of the dataset shows points well above the red dashed line representing z &amp;lt; 1.96" width="85%" height="85%" /&gt;
]

--
.pull-right[
üßê The parent-child monitor reveals poor forecasts of pregnancy for young women.
]



---

class: inverse, center, middle

# Sensitivity

---
# Background 

- For model `\(G\)` with observation and evidence variables `\(O\)` and `\(E\)`, we are interested in `\(p_G(y_O|y_E)\)`

- We want to study how this probability varies in terms of the conditional probabilities `\(p(y_i|y_{{\Pi}_i})\)` that define the model. 

- The question first adressed by &lt;a name=cite-Chan2002&gt;&lt;/a&gt;[Chan and Darwiche (2002)](#bib-Chan2002) is: which changes in the conditional probabilities `\(p(y_i|y_{\Pi_i})\)` would make `\(p_G(y_O|y_E)=a\)`?

---

# Diabetes Example üíâ




- How does the marginal probability of a positive test ‚úîÔ∏è depends on the variable `GLUC` = `high.` üç¨


```r
plot(sensitivity(bn,
                 interest_node = "DIAB", 
                 interest_node_value = "pos", 
                 node = "GLUC", 
                 value_node = "high", 
                 value_parents = NULL, 
                 new_value = "all")) + 
  theme(text=element_text(size=25))
```

???
The vertex of most interest is DIAB reporting the result of a diabetes test (either positive or negative). As an illustration, we first investigate how the probability of a positive test depends on the variable GLUC = high. 
The plot shows that has the probability of having a high level of glucose increases, then also the probability of a positive test increases.

---

# Diabetes Example üíâ

- We also consider how the conditional probability of a positive test ‚úîÔ∏è given a low level of insulin varies when the probability of a high level of üç¨ glucose changes.


```r
plot(sensitivity(bn, 
                 interest_node = "DIAB",
                 interest_node_value =   "pos",
                 evidence_nodes = "INS", 
                 evidence_states = "low",
                 node = "GLUC", 
                 value_node = "high",
                 value_parents = NULL , 
                 new_value = "all"))+ 
  theme(text=element_text(size=25))
```


???
In the previous example the probability of interest was the marginal probability of a positive test. Similarly, we can assess how generic conditional probabilities are affected by changes in the model. As an illustration, let's consider the conditional probability of a positive test given a low level of insulin and this varies when the probability of a high level of glucose changes. This can be done similarly to the previous code, but now we have to fix the evidence nodes and evidence states inputs.

---
# Diabetes Example

.pull-left[
&lt;img src="useR-bnmonitor_files/figure-html/sensdcout-1.png" title="line plot with new values on x axis and sensitivity on y axis showing linear relationship." alt="line plot with new values on x axis and sensitivity on y axis showing linear relationship." width="100%" height="100%" /&gt;
]

--

.pull.right[
&lt;img src="useR-bnmonitor_files/figure-html/sensdicout-1.png" title="line plot with new values on x axis and sensitivity on y axis showing non-linear relationship." alt="line plot with new values on x axis and sensitivity on y axis showing non-linear relationship." width="50%" height="50%" /&gt;
]

--

- Both charts show as the probability of having a high level of glucose üç¨ increases üìà, the probability of a positive test increasesüìà.

- For the conditional probability, the increase is non-linear üåÄ as expected from the results of &lt;a name=cite-Coupe2002&gt;&lt;/a&gt;[Coup√© and Van der Gaag (2002)](#bib-Coupe2002)

???




again the output (conditional) probability of a positive test increases when the probability of a high level of glucose increases. Notice that in this case the increase is non-linear as expected from the results of [Coup√© and Van der Gaag (2002)](#bib-Coupe2002) .

---

# CD distance

- How do changes in the probability of high glucose üç¨ affect the overall probability distribution of the BN?

--

- We can check this with the CD distance from &lt;a name=cite-Chan2005&gt;&lt;/a&gt;[Chan and Darwiche (2005)](#bib-Chan2005)

--


```r
cd_g &lt;- CD(bn, 
           node = "GLUC", 
           value_node = "high",
           value_parents = NULL, 
           new_value = "all")
plot(cd_g) + 
  theme(text=element_text(size=25))
```

---

# CD distance

- How does this compare to the conditional probability of a positive diabetes test given a high body mass index üèãüèΩ and a high glucose üç¨?


```r
cd_d &lt;- CD(bn, 
           node = "DIAB", 
           value_node = "pos",
           value_parents = c("high","high"), 
           new_value = "all")
 plot(cd_d) + 
  theme(text=element_text(size=25))
```

---
# CD distance
.pull-left[
Marginal
&lt;img src="useR-bnmonitor_files/figure-html/cdgout-1.png" title="line plot with new values on x axis and CD on y axis. the plot has a sharp vertex around (0.5,0)." alt="line plot with new values on x axis and CD on y axis. the plot has a sharp vertex around (0.5,0)." width="75%" height="65%" /&gt;
]

--

.pull-right[
Conditional
&lt;img src="useR-bnmonitor_files/figure-html/cddout -1.png" title="line plot with new values on x axis and CD on y axis. the plot has a sharp vertex just to the left of (0.65,0)." alt="line plot with new values on x axis and CD on y axis. the plot has a sharp vertex just to the left of (0.65,0)." width="75%" height="65%" /&gt;
]

--

- Overall the CD distance is smaller for changes conditioned on high BMI üèãüèΩ and high glucoseüç¨ comparatively.

???
We now might be interested in knowing how much changes in the probability of high glucose affect the overall probability distribution of the BN. We compute the CD distance using the \texttt{CD} function and the associated \texttt{plot} method. 

The output is given in Figure \ref{fig:CD1} and one can see that the original value of this probability was around 0.5 since the CD is zero.

As an illustration let's consider the CD distance when the conditional probability of a positive diabetes test given a high body mass index and a high glucose is varied.
The plot is reported in Figure \ref{fig:CD2} and we can notice that overall the CD distance is smaller for changes of this probability compared to the one in Figure \ref{fig:CD1}.

---
# Query probabilities

- Consider probability of positive diabetes test when we have high blood pressure ‚ù£Ô∏è.  


```r
tbl &lt;- querygrain(as.grain(bn), 
           nodes = c("DIAB","PRES"),
           type = "conditional")
```
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; low &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; high &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; neg &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.7338181 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6185608 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; pos &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2661819 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3814392 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

- Suppose we believe this probability should be at least 0.4.

--
 
- What configurations of conditional probabilities meet this constraint?

---

# Query probabilities


```r
snsqur.diab &lt;- sensquery(bn, 
                         interest_node = "DIAB",
                         interest_node_value = "pos", 
                         new_value = 0.4,evidence_nodes = "PRES", 
                         evidence_states = "high");
```
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Node &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Value node &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Value parents &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Original value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Suggested change &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CD distance &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GLUC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4872449 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4409133 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1864248 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PRES &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6084656 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6993007 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4031032 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; DIAB &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pos &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low,low &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0566038 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1250558 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8680104 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MASS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; high &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2606383 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4817689 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.9696970 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; AGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; low,neg &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.7034483 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.9266871 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.6731065 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- The function `sensquery` gives us the plausible scenarios.
???


---
# Co-Authors 

.pull-left[
![man wearing sunglasses and smiling with blurry city in background.](avatar.jpg)
### Manuele Leonelli

Assistant Professor

#### IE University, Madrid

Github: [manueleleonelli](https://github.com/manueleleonelli)
]
.pull-right[
![woman in academic regalia and wearing a celebratory graduation wreath](Ramsiya.jpeg)
### Ramsiya Ramanathan

MSc Data Science Student

#### Universit√† di Bologna, Bologna, Italy

Github: [rramsiya](https://github.com/rramsiya/bnsens)

]

---

# References

&lt;a name=bib-Chan2002&gt;&lt;/a&gt;[Chan, H. and A. Darwiche](#cite-Chan2002)
(2002). "When do numbers really matter?" In: _Journal of Artificial
Intelligence Research_ 17, pp. 265-287.

&lt;a name=bib-Chan2005&gt;&lt;/a&gt;[Chan, H. and A. Darwiche](#cite-Chan2005)
(2005). "A distance measure for bounding probabilistic belief change".
In: _International Journal of Approximate Reasoning_ 38.2, pp. 149-174.

&lt;a name=bib-Coupe2002&gt;&lt;/a&gt;[Coup√©, V. M. and L. C. Van der
Gaag](#cite-Coupe2002) (2002). "Properties of sensitivity analysis of
Bayesian belief networks". In: _Annals of Mathematics and Artificial
Intelligence_ 36.4, pp. 323-356.

&lt;a name=bib-Cowell2006&gt;&lt;/a&gt;[Cowell, R. G., P. Dawid, S. L. Lauritzen,
et al.](#cite-Cowell2006) (2006). _Probabilistic networks and expert
systems: Exact computational methods for Bayesian networks_. Springer
Science &amp; Business Media.

&lt;a name=bib-Cowell2007&gt;&lt;/a&gt;[Cowell, R. G., R. J. Verrall, and Y.
Yoon](#cite-Cowell2007) (2007). "Modeling operational risk with
Bayesian networks". In: _Journal of Risk and Insurance_ 74.4, pp.
795-827.

&lt;a name=bib-Dawid1992&gt;&lt;/a&gt;[Dawid, A. P.](#cite-Dawid1992) (1992).
"Prequential data analysis". In: _Lecture Notes-Monograph Series_, pp.
113-126.

&lt;a name=bib-Nojavan2017&gt;&lt;/a&gt;[Nojavan, F., S. S. Qian, and C. A.
Stow](#cite-Nojavan2017) (2017). "Comparative analysis of
discretization methods in Bayesian networks". In: _Environmental
Modelling &amp; Software_ 87, pp. 64-71.

&lt;a name=bib-radin2017digital&gt;&lt;/a&gt;[Radin, J.](#cite-radin2017digital)
(2017). "‚ÄúDigital natives‚Äù: How medical and indigenous histories matter
for big data". In: _Osiris_ 32.1, pp. 43-64.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"css": ["useR", "useR-fonts"]
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
